# GEMINI Project Analysis: Checkers Engine

## Project Overview

This project is focused on creating a standalone, cross-platform C/C++ GUI application that replicates the look, feel, and behavior of the original Windows Checkerboard. The goal is to refactor the existing C/C++ codebase within `ResourceFiles/` to remove Windows-specific dependencies and replace them with POSIX-compliant or standard C/C++ alternatives, making the entire application, including its GUI and integrated endgame database (EGDB) functionality, cross-platform and Buildable on Linux.

### Architecture

The architecture is a unified C/C++ application, handling both the low-level, performance-critical engine logic and the higher-level game management and graphical user interface. The `ResourceFiles` directory is the effective project root.

A key ongoing task is the porting of the C engine. This involves:
- Replacing Windows API calls with POSIX equivalents.
- Consolidating scattered and conflicting C header files into a single, unified `checkers_types.h`.
- Removing all Windows-specific GUI code from the C sources.

## Building and Running

The C/C++ application must be compiled first. The build process is managed by a shell script.

-   **Build Command:**

    ```bash
    ./build_checkerboard.sh
    ```

-   **Output:** The script compiles all the C/C++ source files located in `ResourceFiles/` and links them into a single executable named `checkerboard_app` in the same directory.

## Development Conventions

-   **Unified Header:** All C/C++ code uses a single header file, `ResourceFiles/checkers_types.h`, for all common types and definitions to resolve compilation issues.
-   **Build Script:** `build_checkerboard.sh` is the single source of truth for building the application.
-   **File Archiving:** Obsolete files are moved to the `/OLD/` directory.
-   **History:** After every significant action, `ResourceFiles/corrections_history.txt` is updated with a description of the fix, and `ResourceFiles/compilation_status.txt` is updated with the current compilation status.

## Project Status

The project is at a solid proof-of-concept stage. We have successfully:

*   Ported the core application from its Windows-specific origins to a cross-platform C++/Qt framework.
*   Established a working build system that compiles the application on Linux.
*   Implemented a basic GUI with a functional checkerboard.
*   Integrated a functional AI that can play a full game.
*   Resolved several critical bugs related to AI evaluation logic and state management.

### Current Focus: EGDB Integration

The primary focus is now on fixing the Endgame Database (EGDB) integration. While the AI's general play has been significantly improved, it does not currently use the EGDB to make instant moves in known endgame positions.

**Today's Progress:**
*   **Fixed AI Evaluation:** Corrected a critical bug in `isPieceDefended` that caused the AI to misjudge threats and make poor moves. The AI now plays a much stronger and more logical game.
*   **Fixed Startup Crash:** Resolved a segmentation fault that occurred during application startup. The crash was caused by two issues in the EGDB loading code (`dblookup.c`):
    1.  A missing `fopen` call that was unmasked by a previous fix.
    2.  A stack buffer overflow when reading the index files.

**Next Steps (For Tomorrow):**

Our iterative process will be as follows:
1.  **Verify Stability:** The user will run the newly built `checkerboard_app` to confirm that the segmentation fault is gone.
2.  **Analyze EGDB Initialization:** I will analyze the new `app.txt` log generated by the run. The goal is to see if the EGDB initialization errors are resolved and if the database files are now loading successfully.
3.  **Debug Remaining EGDB Issues:**
    *   If the logs still show initialization errors, I will continue to debug `dblookup.c` to resolve them.
    *   If the EGDB initializes successfully but the AI still does not make instant endgame moves, I will investigate the logic in `getBestMove` and `minimax` to determine why the `dblookup` results are not being used correctly.